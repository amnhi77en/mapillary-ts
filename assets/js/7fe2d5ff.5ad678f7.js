"use strict";(self.webpackChunkmapillary_js_doc=self.webpackChunkmapillary_js_doc||[]).push([[7693],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return d}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=s(n),d=o,y=m["".concat(p,".").concat(d)]||m[d]||c[d]||a;return n?r.createElement(y,i(i({ref:t},u),{},{components:n})):r.createElement(y,i({ref:t},u))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7198:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return s},default:function(){return c}});var r=n(2122),o=n(9756),a=(n(7294),n(3905)),i={id:"v3",title:"v3.x"},l=void 0,p={unversionedId:"migration/v3",id:"migration/v3",isDocsHomePage:!1,title:"v3.x",description:"MapillaryJS v3.x Migration Guide",source:"@site/docs/migration/v3.md",sourceDirName:"migration",slug:"/migration/v3",permalink:"/mapillary-js/docs/migration/v3",editUrl:"https://github.com/mapillary/mapillary-js/edit/main/doc/docs/migration/v3.md",tags:[],version:"current",frontMatter:{id:"v3",title:"v3.x"},sidebar:"docs",previous:{title:"v4.x",permalink:"/mapillary-js/docs/migration/v4"},next:{title:"v2.x",permalink:"/mapillary-js/docs/migration/v2"}},s=[{value:"MapillaryJS <code>v3.x</code> Migration Guide",id:"mapillaryjs-v3x-migration-guide",children:[]},{value:"Components",id:"components",children:[]},{value:"Node class",id:"node-class",children:[]},{value:"Viewer class",id:"viewer-class",children:[{value:"Constructor parameters",id:"constructor-parameters",children:[]},{value:"Move close to",id:"move-close-to",children:[]},{value:"Auth token",id:"auth-token",children:[]},{value:"URL options",id:"url-options",children:[]}]}],u={toc:s};function c(e){var t=e.components,n=(0,o.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"mapillaryjs-v3x-migration-guide"},"MapillaryJS ",(0,a.kt)("inlineCode",{parentName:"h2"},"v3.x")," Migration Guide"),(0,a.kt)("p",null,"This page describes how to migrate from MapillaryJS ",(0,a.kt)("inlineCode",{parentName:"p"},"v2.x")," to MapillaryJS ",(0,a.kt)("inlineCode",{parentName:"p"},"v3.x"),"."),(0,a.kt)("h2",{id:"components"},"Components"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"stats")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"loading")," components have been removed. Configuring these components in the component options struct will no longer have any effect."),(0,a.kt)("h2",{id:"node-class"},"Node class"),(0,a.kt)("p",null,"The following property names have changed."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"th"},"v2.x")),(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"th"},"v3.x")))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"cameraProjection")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"cameraProjectionType"))))),(0,a.kt)("h2",{id:"viewer-class"},"Viewer class"),(0,a.kt)("h3",{id:"constructor-parameters"},"Constructor parameters"),(0,a.kt)("p",null,"All parameters of the viewer constructor now goes into the viewer options object."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"v3.x"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var mly = new Mapillary.Viewer({\n  apiClient: '<your client id>',\n  container: '<your container id>',\n  imageKey: '<your optional image key for initializing the viewer>',\n  userToken: '<your optional auth token>',\n  // your other viewer options\n});\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"v2.x"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var mly = new Mapillary.Viewer(\n  '<your container id>',\n  '<your client id>',\n  '<your optional image key for initializing the viewer>',\n  {\n    // your other viewer options\n  },\n  '<your optional auth token>',\n);\n")),(0,a.kt)("h3",{id:"move-close-to"},"Move close to"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"Mapillary.Viewer.moveCloseTo")," method has been removed, use the ",(0,a.kt)("a",{parentName:"p",href:"https://www.mapillary.com/developer/api-documentation/#search-images"},"Mapillary REST API")," for this functionality instead."),(0,a.kt)("h3",{id:"auth-token"},"Auth token"),(0,a.kt)("p",null,"The name of the method for setting a user auth token has changed."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"v3.x"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"viewer.setUserToken('<your user token>');\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"v3.x"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"viewer.setAuthToken('<your user token>');\n")),(0,a.kt)("h3",{id:"url-options"},"URL options"),(0,a.kt)("p",null,"Most URL options now need to be set through the Falcor data provider. When setting the Falcor data provider explicitly, the client and user tokens also need to be set on the provider."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"v3.x"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var provider = new Mapillary.API.FalcorDataProvider({\n  apiHost: '<your api host>',\n  clientToken: '<your client id>',\n  clusterReconstructionHost: '<your cluster reconstruction host>',\n  imageHost: '<your image host>',\n  imageTileHost: '<your image tile host>',\n  meshHost: '<your mesh host>',\n  scheme: '<your scheme for all falcor data provider hosts>',\n  userToken: '<your optional auth token>',\n});\n\nvar mly = new Mapillary.Viewer({\n  apiClient: provider,\n  container: '<your container id>',\n  imageKey: '<your optional image key for initializing the viewer>',\n  url: {\n    exploreHost: '<your explore host>',\n    scheme: '<your explore scheme>',\n  },\n});\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"v2.x"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var mly = new Mapillary.Viewer(\n  '<your container id>',\n  '<your client id>',\n  '<your image key>',\n  {\n    url: {\n      apiHost: '<your api host>',\n      clusterReconstructionHost: '<your cluster reconstruction host>',\n      exploreHost: '<your explore host>',\n      imageHost: '<your image host>',\n      imageTileHost: '<your image tile host>',\n      meshHost: '<your mesh host>',\n      scheme: '<your scheme for all hosts>',\n    },\n  },\n  '<your optional auth token>',\n);\n")))}c.isMDXComponent=!0}}]);