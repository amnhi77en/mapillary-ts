"use strict";(self.webpackChunkmapillary_js_doc=self.webpackChunkmapillary_js_doc||[]).push([[3101],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return u}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,s=d(e,["components","mdxType","originalType","parentName"]),m=c(n),u=o,h=m["".concat(l,".").concat(u)]||m[u]||p[u]||r;return n?a.createElement(h,i(i({ref:t},s),{},{components:n})):a.createElement(h,i({ref:t},s))}));function u(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var d={};for(var l in t)hasOwnProperty.call(t,l)&&(d[l]=t[l]);d.originalType=e,d.mdxType="string"==typeof e?e:o,i[1]=d;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2404:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return d},metadata:function(){return l},toc:function(){return c},default:function(){return p}});var a=n(2122),o=n(9756),r=(n(7294),n(3905)),i={id:"coordinates",title:"Coordinate Systems"},d=void 0,l={unversionedId:"theory/coordinates",id:"theory/coordinates",isDocsHomePage:!1,title:"Coordinate Systems",description:"3D Coordinates",source:"@site/docs/theory/coordinates.md",sourceDirName:"theory",slug:"/theory/coordinates",permalink:"/mapillary-js/docs/theory/coordinates",editUrl:"https://github.com/mapillary/mapillary-js/edit/main/doc/docs/theory/coordinates.md",tags:[],version:"current",frontMatter:{id:"coordinates",title:"Coordinate Systems"},sidebar:"docs",previous:{title:"Theory",permalink:"/mapillary-js/docs/theory/theory"},next:{title:"Navigation Graph",permalink:"/mapillary-js/docs/theory/navigation-graph"}},c=[{value:"3D Coordinates",id:"3d-coordinates",children:[{value:"Geodetic Coordinates",id:"geodetic-coordinates",children:[]},{value:"Local Topocentric Coordinates",id:"local-topocentric-coordinates",children:[]},{value:"Conversion",id:"conversion",children:[]},{value:"Local Camera Coordinates",id:"local-camera-coordinates",children:[]}]},{value:"2D Coordinates",id:"2d-coordinates",children:[{value:"Container Pixel Coordinates",id:"container-pixel-coordinates",children:[]},{value:"Basic Image Coordinates",id:"basic-image-coordinates",children:[]}]},{value:"Additional Information",id:"additional-information",children:[]}],s={toc:c};function p(e){var t=e.components,n=(0,o.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"3d-coordinates"},"3D Coordinates"),(0,r.kt)("p",null,"Throughout MapillaryJS, two 3-dimensional coordinate systems are used; ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Geodetic_datum"},"Geodetic (WGS84)")," and ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Local_tangent_plane_coordinates"},"Local Topocentric East, North, Up (ENU)"),"."),(0,r.kt)("p",null,"When interacting with the MapillaryJS API you will generally use Geodetic coordinates. In some situations such as when writing custom renderers, you will most probably work with both and convert between them."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"MapillaryJS provides helper functions for ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Geographic_coordinate_conversion"},"geographic coordinates conversion")," through the ",(0,r.kt)("a",{parentName:"p",href:"/api/modules/api#enutogeodetic"},"enuToGeodetic")," and ",(0,r.kt)("a",{parentName:"p",href:"/api/modules/api#geodetictoenu"},"geodeticToEnu")," functions."))),(0,r.kt)("h3",{id:"geodetic-coordinates"},"Geodetic Coordinates"),(0,r.kt)("p",null,"The WGS84 datum has longitude (degrees), latitude (degrees) and altitude (meters) values."),(0,r.kt)("h3",{id:"local-topocentric-coordinates"},"Local Topocentric Coordinates"),(0,r.kt)("p",null,"In the ",(0,r.kt)("em",{parentName:"p"},"ENU")," (or ",(0,r.kt)("em",{parentName:"p"},"World"),") reference frame the x-axis points to East, the y-axis to North and the z-axis up. All values are represented in meters."),(0,r.kt)("h3",{id:"conversion"},"Conversion"),(0,r.kt)("p",null,"Coordinates can be converted between the ",(0,r.kt)("em",{parentName:"p"},"geodetic")," and ",(0,r.kt)("em",{parentName:"p"},"local topocentric")," coordinates like so."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Geodetic"),(0,r.kt)("th",{parentName:"tr",align:null},"ENU"),(0,r.kt)("th",{parentName:"tr",align:null},"Topocentric"),(0,r.kt)("th",{parentName:"tr",align:null},"Direction"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Longitude"),(0,r.kt)("td",{parentName:"tr",align:null},"East"),(0,r.kt)("td",{parentName:"tr",align:null},"X"),(0,r.kt)("td",{parentName:"tr",align:null},"Right")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Latitude"),(0,r.kt)("td",{parentName:"tr",align:null},"North"),(0,r.kt)("td",{parentName:"tr",align:null},"Y"),(0,r.kt)("td",{parentName:"tr",align:null},"Forward")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Altitude"),(0,r.kt)("td",{parentName:"tr",align:null},"Up"),(0,r.kt)("td",{parentName:"tr",align:null},"Z"),(0,r.kt)("td",{parentName:"tr",align:null},"Up")))),(0,r.kt)("h3",{id:"local-camera-coordinates"},"Local Camera Coordinates"),(0,r.kt)("p",null,"When writing data provider extensions, you will also need to handle ",(0,r.kt)("a",{parentName:"p",href:"https://www.opensfm.org/docs/cam_coord_system.html"},"Local camera coordinates"),"."),(0,r.kt)("h2",{id:"2d-coordinates"},"2D Coordinates"),(0,r.kt)("p",null,"MapillaryJS also works with a number of different 2D coordinate systems."),(0,r.kt)("h3",{id:"container-pixel-coordinates"},"Container Pixel Coordinates"),(0,r.kt)("p",null,"Pixel coordinates are coordinates on the viewer container. The origin is in the top left corner of the container. The axes are directed according to the following for a viewer container with a width of 640 pixels and height of 480 pixels."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(0,0)                          (640, 0)\n     +------------------------\x3e\n     |\n     |\n     |\n     v                        +\n(0, 480)                       (640, 480)\n")),(0,r.kt)("h3",{id:"basic-image-coordinates"},"Basic Image Coordinates"),(0,r.kt)("p",null,"Basic image coordinates represents points in the original image adjusted for orientation. They range from 0 to 1 on both axes. The origin is in the top left corner of the image and the axes are directed according to the following for all image types."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(0,0)                          (1, 0)\n     +------------------------\x3e\n     |\n     |\n     |\n     v                        +\n(0, 1)                         (1, 1)\n")),(0,r.kt)("p",null,"For every camera viewing direction it is possible to convert between these two coordinate systems for the current image. The image can be panned and zoomed independently of the size of the viewer container resulting in different conversion results for different viewing directions"),(0,r.kt)("h2",{id:"additional-information"},"Additional Information"),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"See the ",(0,r.kt)("a",{parentName:"p",href:"https://www.opensfm.org/docs/geometry.html#coordinate-systems"},"OpenSfM coordinate system documentation")," for additional information about ",(0,r.kt)("em",{parentName:"p"},"Normalized image coordinates")," (or ",(0,r.kt)("em",{parentName:"p"},"OpenSfM coordinates"),"), ",(0,r.kt)("em",{parentName:"p"},"Upright image coordinates")," (or ",(0,r.kt)("em",{parentName:"p"},"Basic cordinates"),"), ",(0,r.kt)("em",{parentName:"p"},"World coordinates"),", and ",(0,r.kt)("em",{parentName:"p"},"Local camera coordinates"),"."))))}p.isMDXComponent=!0}}]);